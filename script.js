// Dados dos itens
const portfolioItems = {
  projeto1: {
    image: 'images/engrenagem.jpg',
    image1: 'images/engrenagem.jpg',
    
    title: 'Dashboard do Sistema',
    description: ' ðŸ”© Sobre o Projeto â€“cisÃ£o, roscas e acabamento superficial. Todas as partes do canhÃ£o foram confeccionadas com o uso de mÃ¡quinas-ferramenta, como torno mecÃ¢nico, fresadora e furadeira de bancada.  Durante o desenvolvimento, os alunos trabalharam conceitos como:  Leitura e interpretaÃ§Ã£o de desenho tÃ©cnico;  MediÃ§Ã£o e controle dimensional com instrumentos de precisÃ£o;  SeguranÃ§a na operaÃ§Ã£o de mÃ¡quinas;  Montagem e testes funcionais do protÃ³tipo.  AlÃ©m do aspecto tÃ©cnico, o projeto tambÃ©m visa estimular a criatividade, o trabalho em equipe e a valorizaÃ§Ã£o do conhecimento histÃ³rico, promovendo uma aprendizagem completa, conectada ao mundo real.',
    views: 17,
    projectUrl: 'external/dashboard.html'
  },
  projeto2: {
    image: 'images/dashboard.jpg',
    title: 'Dashboard do Sistema',
    description: ' ðŸ”© Sobre o Projeto â€“ CanhÃ£o Usinado  Este projeto apresenta a reproduÃ§Ã£o em miniatura de um canhÃ£o histÃ³rico, desenvolvida no setor de usinagem mecÃ¢nica como parte de uma atividade prÃ¡tica voltada ao aprendizado de tÃ©cnicas de fabricaÃ§Ã£o.  A proposta tem como objetivo unir histÃ³ria e engenharia, demonstrando na prÃ¡tica o processo de usinagem de peÃ§as cilÃ­ndricas, encaixes de precisÃ£o, roscas e acabamento superficial. Todas as partes do canhÃ£o foram confeccionadas com o uso de mÃ¡quinas-ferramenta, como torno mecÃ¢nico, fresadora e furadeira de bancada.  Durante o desenvolvimento, os alunos trabalharam conceitos como:  Leitura e interpretaÃ§Ã£o de desenho tÃ©cnico;  MediÃ§Ã£o e controle dimensional com instrumentos de precisÃ£o;  SeguranÃ§a na operaÃ§Ã£o de mÃ¡quinas;  Montagem e testes funcionais do protÃ³tipo.  AlÃ©m do aspecto tÃ©cnico, o projeto tambÃ©m visa estimular a criatividade, o trabalho em equipe e a valorizaÃ§Ã£o do conhecimento histÃ³rico, promovendo uma aprendizagem completa, conectada ao mundo real.',
    views: 17,
    projectUrl: 'external/canhao/canhao.html'
  },
  projeto3: {
    image: 'images/reports.jpg',
    title: 'MÃ³dulo de RelatÃ³rios',
    description: 'Gere anÃ¡lises detalhadas com filtros avanÃ§ados e exportaÃ§Ã£o para mÃºltiplos formatos. IntegraÃ§Ã£o com Excel e PDF.',
    views: 12,
    projectUrl: 'external/silo/silo.html'
  },
  projeto4: {
    image: 'images/mobile.jpg',
    title: 'VersÃ£o Mobile',
    description: 'Aplicativo otimizado para dispositivos mÃ³veis com funcionalidades offline e sincronizaÃ§Ã£o em segundo plano.',
    views: 8,
    projectUrl: 'projetos/mobile.html'
  },
   projeto5: {
    image: 'images/mobile.jpg',
    title: 'VersÃ£o Mobile',
    description: 'Aplicativo otimizado para dispositivos mÃ³veis com funcionalidades offline e sincronizaÃ§Ã£o em segundo plano.',
    views: 8,
    projectUrl: 'projetos/mobile.html'
  },
   projeto6: {
    image: 'images/mobile.jpg',
    title: 'VersÃ£o Mobile',
    description: 'Aplicativo otimizado para dispositivos mÃ³veis com funcionalidades offline e sincronizaÃ§Ã£o em segundo plano.',
    views: 8,
    projectUrl: 'projetos/mobile.html'
  },
   projeto7: {
    image: 'images/mobile.jpg',
    title: 'VersÃ£o Mobile',
    description: 'Aplicativo otimizado para dispositivos mÃ³veis com funcionalidades offline e sincronizaÃ§Ã£o em segundo plano.',
    views: 8,
    projectUrl: 'projetos/mobile.html'
  },
   projeto8: {
    image: 'images/mobile.jpg',
    title: 'VersÃ£o Mobile',
    description: 'Aplicativo otimizado para dispositivos mÃ³veis com funcionalidades offline e sincronizaÃ§Ã£o em segundo plano.',
    views: 8,
    projectUrl: 'projetos/mobile.html'
  },
   projeto9: {
    image: 'images/mobile.jpg',
    title: 'VersÃ£o Mobile',
    description: 'Aplicativo otimizado para dispositivos mÃ³veis com funcionalidades offline e sincronizaÃ§Ã£o em segundo plano.',
    views: 8,
    projectUrl: 'projetos/mobile.html'
  }
};

// Abre o pop-up
function openContentPopup(itemId) {
  const item = portfolioItems[itemId];
  if (!item) return;

  // Atualiza o conteÃºdo
  document.getElementById('popupTitle').textContent = item.title;
  document.getElementById('popupImage').src = item.image;
  document.getElementById('popupImage').alt = item.title;
  document.getElementById('itemDescription').textContent = item.description;
  document.getElementById('itemViews').textContent = `${item.views} visualizaÃ§Ãµes`;
  document.getElementById('projectFrame').src = item.projectUrl;
  document.getElementById('shareLink').value = `${window.location.origin}${window.location.pathname}#?item=${itemId}`;

  // Mostra o pop-up
  document.getElementById('contentPopup').style.display = 'block';
}

// Fecha o pop-up
function closePopup() {
  document.getElementById('contentPopup').style.display = 'none';
}

// Alterna entre conteÃºdos
document.querySelectorAll('.switch-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    // Ativa o botÃ£o clicado
    document.querySelectorAll('.switch-btn').forEach(b => b.classList.remove('active'));
    this.classList.add('active');
    
    // Mostra o conteÃºdo correspondente
    const contentId = `${this.dataset.content}-content`;
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    document.getElementById(contentId).classList.add('active');
  });
});

// Copia o link
function copyLink() {
  const linkInput = document.getElementById('shareLink');
  linkInput.select();
  document.execCommand('copy');
  
  // Feedback visual
  const copyBtn = linkInput.nextElementSibling;
  const originalHTML = copyBtn.innerHTML;
  copyBtn.innerHTML = '<i class="fas fa-check"></i> Copiado!';
  setTimeout(() => {
    copyBtn.innerHTML = originalHTML;
  }, 2000);
}

// Configura eventos das miniaturas
document.querySelectorAll('.screenshot').forEach(item => {
  item.addEventListener('click', function() {
    const itemId = this.getAttribute('data-item');
    openContentPopup(itemId);
  });
});

// Fecha ao clicar fora
window.addEventListener('click', (e) => {
  if (e.target === document.getElementById('contentPopup')) {
    closePopup();
  }
});
// FunÃ§Ã£o para recarregar o iframe
function reloadProject() {
  const iframe = document.getElementById('projectFrame');
  iframe.src = iframe.src; // Recarrega o iframe
}

// FunÃ§Ã£o para abrir em tela cheia
function openProjectFullscreen() {
  const iframe = document.getElementById('projectFrame');
  
  if (iframe.requestFullscreen) {
    iframe.requestFullscreen();
  } else if (iframe.webkitRequestFullscreen) { /* Safari */
    iframe.webkitRequestFullscreen();
  } else if (iframe.msRequestFullscreen) { /* IE11 */
    iframe.msRequestFullscreen();
  }
}

// Ajusta dinamicamente a altura do popup-body
function adjustPopupHeight() {
  const popupBody = document.querySelector('.popup-body');
  const windowHeight = window.innerHeight;
  
  // Calcula 70% da altura da janela, menos o espaÃ§o dos outros elementos
  const calculatedHeight = Math.min(Math.max(windowHeight * 0.7, 400), 700);
  popupBody.style.height = `${calculatedHeight}px`;
}

// Chamar na abertura do popup e no redimensionamento
window.addEventListener('resize', adjustPopupHeight);

// No seu openContentPopup(), adicione:
adjustPopupHeight();
// VariÃ¡vel para controlar se o projeto jÃ¡ foi carregado
let projectLoaded = false;
let currentProjectUrl = '';

// Modifique a funÃ§Ã£o de alternÃ¢ncia de conteÃºdo
document.querySelectorAll('.switch-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    const contentType = this.dataset.content;
    
    // Ativa o botÃ£o clicado
    document.querySelectorAll('.switch-btn').forEach(b => b.classList.remove('active'));
    this.classList.add('active');
    
    // Oculta todos os conteÃºdos
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    
    // Mostra o conteÃºdo correspondente
    document.getElementById(`${contentType}-content`).classList.add('active');
    
    // Se for projeto e ainda nÃ£o foi carregado
    if (contentType === 'project' && !projectLoaded && currentProjectUrl) {
      loadProject(currentProjectUrl);
    }
  });
});

// FunÃ§Ã£o para carregar o projeto
function loadProject(url) {
  const loadingElement = document.querySelector('.project-loading');
  const viewerElement = document.querySelector('.project-viewer');
  const iframe = document.getElementById('projectFrame');
  
  loadingElement.style.display = 'flex';
  viewerElement.style.display = 'none';
  
  iframe.src = url;
  
  // Quando o iframe carregar
  iframe.onload = function() {
    loadingElement.style.display = 'none';
    viewerElement.style.display = 'block';
    projectLoaded = true;
  };
}

// Modifique a funÃ§Ã£o openContentPopup
function openContentPopup(itemId) {
  const item = portfolioItems[itemId];
  if (!item) return;

  // Reseta o estado do projeto
  projectLoaded = false;
  currentProjectUrl = item.projectUrl;
  
  // Atualiza o conteÃºdo
  document.getElementById('popupTitle').textContent = item.title;
  document.getElementById('popupImage').src = item.image;
  document.getElementById('popupImage').alt = item.title;
  document.getElementById('itemDescription').textContent = item.description;
  document.getElementById('itemViews').textContent = `${item.views} visualizaÃ§Ãµes`;
  
  // Mostra a imagem por padrÃ£o
  document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
  document.getElementById('image-content').classList.add('active');
  document.querySelectorAll('.switch-btn').forEach(b => b.classList.remove('active'));
  document.querySelector('[data-content="image"]').classList.add('active');
  
  // Exibe o pop-up
  document.getElementById('contentPopup').style.display = 'block';
}

// FunÃ§Ãµes auxiliares permanecem as mesmas
function reloadProject() {
  const iframe = document.getElementById('projectFrame');
  iframe.src = iframe.src;
  document.querySelector('.project-loading').style.display = 'flex';
  document.querySelector('.project-viewer').style.display = 'none';
}

function openProjectFullscreen() {
  const iframe = document.getElementById('projectFrame');
  if (iframe.requestFullscreen) {
    iframe.requestFullscreen();
  } else if (iframe.webkitRequestFullscreen) {
    iframe.webkitRequestFullscreen();
  } else if (iframe.msRequestFullscreen) {
    iframe.msRequestFullscreen();
  }
}
// FunÃ§Ã£o para ajustar responsividade
function handleResponsive() {
  const popupBody = document.querySelector('.popup-body');
  const isMobile = window.innerWidth <= 768;
  
  if (isMobile) {
    // Ajustes especÃ­ficos para mobile
    popupBody.style.maxHeight = '60vh';
    document.querySelectorAll('.switch-btn').forEach(btn => {
      btn.style.flex = '1 1 30%';
    });
  } else {
    // Ajustes para desktop/tablet
    popupBody.style.maxHeight = '70vh';
  }
  
  // Ajuste especial para iframe em telas pequenas
  const projectContent = document.getElementById('project-content');
  if (projectContent.classList.contains('active')) {
    adjustProjectViewer();
  }
}

// FunÃ§Ã£o para ajustar o visualizador de projeto
function adjustProjectViewer() {
  const isMobile = window.innerWidth <= 768;
  const viewer = document.querySelector('.project-viewer');
  
  if (isMobile) {
    viewer.style.paddingBottom = '75%'; // ProporÃ§Ã£o 4:3 para mobile
  } else {
    viewer.style.paddingBottom = '56.25%'; // ProporÃ§Ã£o 16:9 para desktop
  }
}

// Modifique a funÃ§Ã£o initialize() para incluir:
function initialize() {
  // ... outros event listeners ...
  
  // Evento para redimensionamento
  window.addEventListener('resize', () => {
    handleResponsive();
    adjustPopupHeight();
  });
  
  // Chamada inicial
  handleResponsive();
}
// FunÃ§Ã£o para alternar o menu mobile
function toggleMobileMenu() {
  const menu = document.getElementById('navbarMenu');
  menu.classList.toggle('active');
  
  // AnimaÃ§Ã£o do Ã­cone
  const btn = document.querySelector('.mobile-menu-btn');
  if (menu.classList.contains('active')) {
    btn.innerHTML = '<i class="fas fa-times"></i>';
  } else {
    btn.innerHTML = '<i class="fas fa-bars"></i>';
  }
}

// Fechar menu ao clicar em um item (opcional)
document.querySelectorAll('.navbar-menu a').forEach(item => {
  item.addEventListener('click', () => {
    if (window.innerWidth <= 992) {
      toggleMobileMenu();
    }
  });
});

// Fechar menu ao redimensionar para desktop
window.addEventListener('resize', () => {
  if (window.innerWidth > 992) {
    const menu = document.getElementById('navbarMenu');
    menu.classList.remove('active');
    document.querySelector('.mobile-menu-btn').innerHTML = '<i class="fas fa-bars"></i>';
  }
});



